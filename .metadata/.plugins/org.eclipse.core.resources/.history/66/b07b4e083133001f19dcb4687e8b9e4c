import pacientes.*
import aparatos.*

describe "Tests parte 1" {
	    const leonardo = new Paciente(edad = 40, nivelDeDolor = 10, nivelDeFortaleza = 20)
		const milena = new Paciente(edad = 3, nivelDeDolor = 30, nivelDeFortaleza = 50)
		const magneto = new Magneto()
		const bici = new Bicicleta()
		const miniTramp = new Minitramp()
		
	test "Leonardo puede usar los tres aparatos creados, 
		  mientras que Milena puede usar sólo el magneto." {
		
	
		assert.that(magneto.puedeSerUsadoPor(leonardo))
		assert.that(bici.puedeSerUsadoPor(leonardo))
		assert.that(miniTramp.puedeSerUsadoPor(leonardo))
		
		assert.that(magneto.puedeSerUsadoPor(milena))
		assert.that(not bici.puedeSerUsadoPor(milena))
		assert.that(not miniTramp.puedeSerUsadoPor(milena))
	}
	
	test "Después de usar el magneto una vez, el nivel de dolor de Leonardo baja a 9." {
		magneto.usar(leonardo)
		
		assert.equals(9, leonardo.nivelDeDolor())
	}
	
	test "Después de usar el magneto una vez, el nivel de dolor de Milena baja a 27." {
		magneto.usar(milena)
		
		assert.equals(27, milena.nivelDeDolor())
	}
	
	test "Después de usar la bicicleta una vez, el nivel de dolor de Leonardo baja a 6,
		  y la fortaleza sube a 23." {
		bici.usar(leonardo)
		
		assert.equals(6, leonardo.nivelDeDolor())
		assert.equals(23, leonardo.nivelDeFortaleza())
	}
	
	test "Después de usar el minitramp una vez, la fortaleza de Leonardo sube a 24." {
		miniTramp.usar(leonardo)
		
		assert.equals(24, leonardo.nivelDeFortaleza())
	}
}

describe "Tests parte 2" {
	    const leonardo = new Paciente(edad = 40, nivelDeDolor = 10, nivelDeFortaleza = 20)
		const milena = new Paciente(edad = 3, nivelDeDolor = 30, nivelDeFortaleza = 50)
		const magneto = new Magneto()
		const bici = new Bicicleta()
		const miniTramp = new Minitramp()
		
	test "La rutina de Leonardo es la indicada en el enunciado; Magneto, Bicicleta y
          Minitramp. Puede hacer la rutina que tiene asignada." {
		  leonardo.asignarRutina([magneto, bici, miniTramp])
			  
		  assert.that(leonardo.puedeRealizarLaRutina())
	}
	
	test "Después de Leonardo realizar la rutina una vez, su nivel de dolor baja a 1.8,
	      y su fortaleza sube a 30." {
		 leonardo.asignarRutina([bici, miniTramp, bici, magneto])
		 leonardo.realizarRutina()
			 
		 assert.equals(1.8, leonardo.nivelDeDolor())
		 assert.equals(30, leonardo.nivelDeFortaleza())
	}
		
	test "En la rutina asignada Milena usa, primero un magneto, después una bicicleta.
		  Ella no puede realizar esta rutina." {
	      milena.asignarRutina([magneto, bici])
			  	
	      assert.that(not milena.puedeRealizarLaRutina())
	}
}

describe "Tests parte 3" {
	const magneto = new Magneto(color = "verde")
	const bici = new Bicicleta(color = "rojo")
	const miniTramp = new Minitramp()
	const nicolas = new PacienteResistente(edad = 40, nivelDeDolor = 10, nivelDeFortaleza = 20)
	const victoria = new PacienteCaprichoso(edad = 30, nivelDeDolor = 10, nivelDeFortaleza = 40)
	const julian = new PacienteCaprichoso(edad = 20, nivelDeDolor = 54, nivelDeFortaleza = 50)
	const zoe = new PacienteRapidaRecuperacion(edad = 50, nivelDeDolor = 14, nivelDeFortaleza = 40)
	
	test "La rutina de nicolas es la misma que de leonardo. Puede hacerla y terminada
		  su nivel de dolor baja a 1.8, y su fortaleza sube a 34" {
		  nicolas.asignarRutina([bici, miniTramp, bici, magneto])
		  
		  assert.that(nicolas.puedeRealizarLaRutina())
		  
		  nicolas.realizarRutina()
		  assert.equals(34, nicolas.nivelDeFortaleza())
		  assert.equals(1.8, nicolas.nivelDeDolor())
	}
}


