import wollok.game.*
import player.*
import items.*

object snake {
	
    method personaje(){
		const jugador = new CabezaDeSnake(image = "cabezaDerecha.png")
		const parte1 = new ParteDeSnake(position = game.at(6,7))
		const colaSnake = new Cola(image = "cola.png", position = game.at(5,7))
		const manzana = new ItemEnNivel(image = "manzana2.png")
		game.addVisual(jugador)
		game.addVisual(parte1)
		game.addVisual(colaSnake)
		game.addVisualIn(manzana, manzana.posicion())
		
		lasPartesDeSnake.add(jugador)
		lasPartesDeSnake.add(parte1)
		lasPartesDeSnake.add(colaSnake)
		
		
		keyboard.up().onPressDo(lasPartesDeSnake.forEach({cuerpo => cuerpo.siguienteaDondeIr("up")}))
		keyboard.down().onPressDo(lasPartesDeSnake.forEach({cuerpo => cuerpo.siguienteaDondeIr("down")}))
		keyboard.left().onPressDo(lasPartesDeSnake.forEach({cuerpo => cuerpo.siguienteaDondeIr("left")}))
		keyboard.right().onPressDo(lasPartesDeSnake.forEach({cuerpo => cuerpo.siguienteaDondeIr("right")}))
		
		game.whenCollideDo(manzana, {
			const nuevaParte = new ParteDeSnake()
			lasPartesDeSnake.remove(lasPartesDeSnake.last())
			lasPartesDeSnake.add(nuevaParte)	
			lasPartesDeSnake.add(colaSnake)		
		})
		
		game.onTick(400, "movimientoDelJugador",{lasPartesDeSnake.forEach({cuerpo => cuerpo.moverse()})})
	}
	
	 method iniciar() {
		game.cellSize(32)
		game.height(15)
		game.width(15)
		pantallaDeInicio.iniciar()
	    game.start()
	    
	}
	
	method reiniciarPartida() {                              
		game.addVisual("fondoJuego.")
		self.personaje()
	}
	
	
}

